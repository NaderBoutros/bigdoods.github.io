
  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  


<!Doctype html>
<html id="docs" class="Support">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
    <link rel="stylesheet" href="/css/styles.css"/>
    <link rel="stylesheet" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" href="/css/sweetalert.css">
    
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/sweetalert.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Kompose User Guide - Kubernetes</title>
<meta property="og:title" content="Kompose User Guide" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://localhost:4000/docs/tools/kompose/user-guide/" />
<meta property="og:url" content="http://localhost:4000/docs/tools/kompose/user-guide/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@kubernetesio" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "WebPage",
"headline": "Kompose User Guide",
"description": "Production-Grade Container Orchestration",
"publisher": {"@type": "Organization",
"logo": {"@type": "ImageObject",
"url": "http://localhost:4000/images/favicon.png"}},
"url": "http://localhost:4000/docs/tools/kompose/user-guide/"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/">Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
        </ul>
        <!-- <a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try Kubernetes</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/hellonode/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple Kubernetes cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/">Documentation</a></h3>
            <p>Learn how to use Kubernetes with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other Kubernetes users and the Kubernetes authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.kubernetes.io">Blog</a></h3>
            <p>Read the latest news for Kubernetes and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
            <a href="https://github.com/kubernetes/kubernetes" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/kubernetesio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Support</h1>
  <h5>Troubleshooting resources, frequently asked questions, and community support channels.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/" >DOCS HOME</a></li>
      <li><a href="/docs/user-guide/" >GUIDES</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
      <li><a href="/docs/tools/" >TOOLS</a></li>
      <li><a href="/docs/samples/" >SAMPLES</a></li>
      <li><a href="/docs/troubleshooting/" class="YAH">SUPPORT</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    </div>
  </div>
</section>

<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
        
          
  

    

    
      <a class="item" data-title="Support" href="/docs/troubleshooting/"></a>
    
  

  
    <div class="item" data-title="Troubleshooting">
      <div class="container">
        
  

    

    
      <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Frequently Asked Questions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="User FAQ" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ/"></a>
    
  

  

    

    
      <a class="item" data-title="Debugging FAQ" href="https://github.com/kubernetes/kubernetes/wiki/Debugging-FAQ/"></a>
    
  

  

    

    
      <a class="item" data-title="Services FAQ" href="https://github.com/kubernetes/kubernetes/wiki/Services-FAQ/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Contributing to the Kubernetes Docs">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Contributing to the Kubernetes Documentation" href="/editdocs/"></a>
    
  

  

    

    
      <a class="item" data-title="Creating a Documentation Pull Request" href="/docs/contribute/create-pull-request/"></a>
    
  

  

    

    
      <a class="item" data-title="Writing a New Topic" href="/docs/contribute/write-new-topic/"></a>
    
  

  

    

    
      <a class="item" data-title="Staging Your Documentation Changes" href="/docs/contribute/stage-documentation-changes/"></a>
    
  

  

    

    
      <a class="item" data-title="Using Page Templates" href="/docs/contribute/page-templates/"></a>
    
  

  

    

    
      <a class="item" data-title="Reviewing Documentation Issues" href="/docs/contribute/review-issues/"></a>
    
  

  

    

    
      <a class="item" data-title="Documentation Style Guide" href="/docs/contribute/style-guide/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Other Resources">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Kubernetes Issue Tracker on GitHub" href="https://github.com/kubernetes/kubernetes/issues/"></a>
    
  

  

    

    
      <a class="item" data-title="Report a Security Vulnerability" href="/docs/reporting-security-issues/"></a>
    
  

  

    

    
      <a class="item" data-title="Release Notes" href="https://github.com/kubernetes/kubernetes/releases/"></a>
    
  

  

    

    
      <a class="item" data-title="Release Roadmap" href="https://github.com/kubernetes/kubernetes/milestones/"></a>
    
  


      </div>
    </div>
  

  

    

    
      <a class="item" data-title="Deprecation Policy" href="/docs/deprecation-policy.md"></a>
    
  


        
        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/tools/kompose/user-guide.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>Kompose User Guide</h1>
        

        <ul id="markdown-toc">
  <li><a href="#kompose-convert" id="markdown-toc-kompose-convert">Kompose convert</a>    <ul>
      <li><a href="#kubernetes" id="markdown-toc-kubernetes">Kubernetes</a></li>
      <li><a href="#openshift" id="markdown-toc-openshift">OpenShift</a></li>
    </ul>
  </li>
  <li><a href="#kompose-up" id="markdown-toc-kompose-up">Kompose up</a>    <ul>
      <li><a href="#kubernetes-1" id="markdown-toc-kubernetes-1">Kubernetes</a></li>
      <li><a href="#openshift-1" id="markdown-toc-openshift-1">OpenShift</a></li>
    </ul>
  </li>
  <li><a href="#kompose-down" id="markdown-toc-kompose-down">Kompose down</a></li>
  <li><a href="#alternate-formats" id="markdown-toc-alternate-formats">Alternate formats</a></li>
  <li><a href="#unsupported-docker-compose-configuration-options" id="markdown-toc-unsupported-docker-compose-configuration-options">Unsupported docker-compose configuration options</a></li>
  <li><a href="#labels" id="markdown-toc-labels">Labels</a></li>
  <li><a href="#restart" id="markdown-toc-restart">Restart</a></li>
</ul>

<p>Kompose has support for two providers: OpenShift and Kubernetes.
You can choose targeted provider either using global option <code class="highlighter-rouge">--provider</code>, or by setting environment variable <code class="highlighter-rouge">PROVIDER</code>.
By setting environment variable <code class="highlighter-rouge">PROVIDER</code> you can permanently switch to OpenShift provider without need to always specify <code class="highlighter-rouge">--provider openshift</code> option.
If no provider is specified Kubernetes is default provider.</p>

<h2 id="kompose-convert">Kompose convert</h2>

<p>Currently Kompose supports to transform either Docker Compose file (both of v1 and v2) and <a href="https://blog.docker.com/2016/06/docker-app-bundle/">experimental Distributed Application Bundles</a> into Kubernetes and OpenShift objects.
There is a couple of sample files in the <code class="highlighter-rouge">examples/</code> directory for testing.
You will convert the compose or dab file to Kubernetes or OpenShift objects with <code class="highlighter-rouge">kompose convert</code>.</p>

<h3 id="kubernetes">Kubernetes</h3>
<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">cd</span><span class="kv"> examples/
</span>
<span class="w">$ </span><span class="nc">ls</span><span class="kv">
</span>docker-compose.yml  docker-compose-bundle.dab  docker-gitlab.yml  docker-voting.yml

<span class="w">$ </span><span class="nc">kompose</span><span class="kv"> -f docker-gitlab.yml convert 
</span>file "redisio-svc.yaml" created
file "gitlab-svc.yaml" created
file "postgresql-svc.yaml" created
file "gitlab-deployment.yaml" created
file "postgresql-deployment.yaml" created
file "redisio-deployment.yaml" created

<span class="w">$ </span><span class="nc">ls</span><span class="kv"> *.yaml
</span>gitlab-deployment.yaml  postgresql-deployment.yaml  redis-deployment.yaml    redisio-svc.yaml  web-deployment.yaml
gitlab-svc.yaml         postgresql-svc.yaml         redisio-deployment.yaml  redis-svc.yaml    web-svc.yaml
</code></pre>
</div>

<p>You can try with a Docker Compose version 2 like this:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> --file docker-voting.yml convert
</span>WARN[0000]: Unsupported key networks - ignoring
WARN[0000]: Unsupported key build - ignoring
file "worker-svc.yaml" created
file "db-svc.yaml" created
file "redis-svc.yaml" created
file "result-svc.yaml" created
file "vote-svc.yaml" created
file "redis-deployment.yaml" created
file "result-deployment.yaml" created
file "vote-deployment.yaml" created
file "worker-deployment.yaml" created
file "db-deployment.yaml" created

<span class="w">$ </span><span class="nc">ls</span><span class="kv">
</span>db-deployment.yaml  docker-compose.yml         docker-gitlab.yml  redis-deployment.yaml  result-deployment.yaml  vote-deployment.yaml  worker-deployment.yaml
db-svc.yaml         docker-compose-bundle.dab  docker-voting.yml  redis-svc.yaml         result-svc.yaml         vote-svc.yaml         worker-svc.yaml
</code></pre>
</div>

<p>You can also provide multiple docker-compose files at the same time:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> -f docker-compose.yml -f docker-guestbook.yml convert
</span>file "frontend-service.yaml" created         
file "mlbparks-service.yaml" created         
file "mongodb-service.yaml" created          
file "redis-master-service.yaml" created     
file "redis-slave-service.yaml" created      
file "frontend-deployment.yaml" created      
file "mlbparks-deployment.yaml" created      
file "mongodb-deployment.yaml" created       
file "mongodb-claim0-persistentvolumeclaim.yaml" created 
file "redis-master-deployment.yaml" created  
file "redis-slave-deployment.yaml" created   

<span class="w">$ </span><span class="nc">ls</span><span class="kv">
</span>mlbparks-deployment.yaml  mongodb-service.yaml                       redis-slave-service.jsonmlbparks-service.yaml  
frontend-deployment.yaml  mongodb-claim0-persistentvolumeclaim.yaml  redis-master-service.yaml
frontend-service.yaml     mongodb-deployment.yaml                    redis-slave-deployment.yaml
redis-master-deployment.yaml
</code></pre>
</div>

<p>When multiple docker-compose files are provided the configuration is merged. Any configuration that is common will be over ridden by subsequent file.</p>

<p>Using <code class="highlighter-rouge">--bundle, --dab</code> to specify a DAB file as below:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> --bundle docker-compose-bundle.dab convert
</span>WARN[0000]: Unsupported key networks - ignoring
file "redis-svc.yaml" created
file "web-svc.yaml" created
file "web-deployment.yaml" created
file "redis-deployment.yaml" created
</code></pre>
</div>

<h3 id="openshift">OpenShift</h3>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> --provider openshift --file docker-voting.yml convert
</span>WARN[0000] [worker] Service cannot be created because of missing port.
INFO[0000] file "vote-service.yaml" created             
INFO[0000] file "db-service.yaml" created               
INFO[0000] file "redis-service.yaml" created            
INFO[0000] file "result-service.yaml" created           
INFO[0000] file "vote-deploymentconfig.yaml" created    
INFO[0000] file "vote-imagestream.yaml" created         
INFO[0000] file "worker-deploymentconfig.yaml" created  
INFO[0000] file "worker-imagestream.yaml" created       
INFO[0000] file "db-deploymentconfig.yaml" created      
INFO[0000] file "db-imagestream.yaml" created           
INFO[0000] file "redis-deploymentconfig.yaml" created   
INFO[0000] file "redis-imagestream.yaml" created        
INFO[0000] file "result-deploymentconfig.yaml" created  
INFO[0000] file "result-imagestream.yaml" created  
</code></pre>
</div>

<p>In similar way you can convert DAB files to OpenShift.</p>
<pre><code class="language-console$">$ kompose --bundle docker-compose-bundle.dab --provider openshift convert
WARN[0000]: Unsupported key networks - ignoring
INFO[0000] file "redis-svc.yaml" created
INFO[0000] file "web-svc.yaml" created
INFO[0000] file "web-deploymentconfig.yaml" created
INFO[0000] file "web-imagestream.yaml" created           
INFO[0000] file "redis-deploymentconfig.yaml" created
INFO[0000] file "redis-imagestream.yaml" created
</code></pre>

<p>It also supports creating buildconfig for build directive in a service. By default, it uses the remote repo for the current git branch as the source repo, and the current branch as the source branch for the build. You can specify a different source repo and branch using <code class="highlighter-rouge">--build-repo</code> and <code class="highlighter-rouge">--build-branch</code> options respectively.</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code>kompose --provider openshift --file buildconfig/docker-compose.yml convert
WARN[0000] [foo] Service cannot be created because of missing port. 
INFO[0000] Buildconfig using git@github.com:rtnpro/kompose.git::master as source. 
INFO[0000] file "foo-deploymentconfig.yaml" created     
INFO[0000] file "foo-imagestream.yaml" created          
INFO[0000] file "foo-buildconfig.yaml" created 
</code></pre>
</div>

<p><strong>Note</strong>: If you are manually pushing the Openshift artifacts using <code class="highlighter-rouge">oc create -f</code>, you need to ensure that you push the imagestream artifact before the buildconfig artifact, to workaround this Openshift issue: https://github.com/openshift/origin/issues/4518 .</p>

<h2 id="kompose-up">Kompose up</h2>

<p>Kompose supports a straightforward way to deploy your “composed” application to Kubernetes or OpenShift via <code class="highlighter-rouge">kompose up</code>.</p>

<h3 id="kubernetes-1">Kubernetes</h3>
<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> --file ./examples/docker-guestbook.yml up
</span>We are going to create Kubernetes deployments and services for your Dockerized application.
If you need different kind of resources, use the 'kompose convert' and 'kubectl create -f' commands instead.

INFO[0000] Successfully created service: redis-master   
INFO[0000] Successfully created service: redis-slave    
INFO[0000] Successfully created service: frontend       
INFO[0001] Successfully created deployment: redis-master
INFO[0001] Successfully created deployment: redis-slave
INFO[0001] Successfully created deployment: frontend    

Your application has been deployed to Kubernetes. You can run 'kubectl get deployment,svc,pods' for details.

<span class="w">$ </span><span class="nc">kubectl</span><span class="kv"> get deployment,svc,pods
</span>NAME                            DESIRED       CURRENT       UP-TO-DATE   AVAILABLE   AGE
frontend                        1             1             1            1           4m
redis-master                    1             1             1            1           4m
redis-slave                     1             1             1            1           4m
NAME                            CLUSTER-IP    EXTERNAL-IP   PORT(S)      AGE
frontend                        10.0.174.12   &lt;none&gt;        80/TCP       4m
kubernetes                      10.0.0.1      &lt;none&gt;        443/TCP      13d
redis-master                    10.0.202.43   &lt;none&gt;        6379/TCP     4m
redis-slave                     10.0.1.85     &lt;none&gt;        6379/TCP     4m
NAME                            READY         STATUS        RESTARTS     AGE
frontend-2768218532-cs5t5       1/1           Running       0            4m
redis-master-1432129712-63jn8   1/1           Running       0            4m
redis-slave-2504961300-nve7b    1/1           Running       0            4m
</code></pre>
</div>
<p>Note:</p>

<ul>
  <li>You must have a running Kubernetes cluster with a pre-configured kubectl context.</li>
  <li>Only deployments and services are generated and deployed to Kubernetes. If you need different kind of resources, use the ‘kompose convert’ and ‘kubectl create -f’ commands instead.</li>
</ul>

<h3 id="openshift-1">OpenShift</h3>
<div class="language-console highlighter-rouge"><pre class="highlight"><code>$kompose --file ./examples/docker-guestbook.yml --provider openshift up
We are going to create OpenShift DeploymentConfigs and Services for your Dockerized application.
If you need different kind of resources, use the 'kompose convert' and 'oc create -f' commands instead.

INFO[0000] Successfully created service: redis-slave    
INFO[0000] Successfully created service: frontend       
INFO[0000] Successfully created service: redis-master   
INFO[0000] Successfully created deployment: redis-slave
INFO[0000] Successfully created ImageStream: redis-slave
INFO[0000] Successfully created deployment: frontend    
INFO[0000] Successfully created ImageStream: frontend   
INFO[0000] Successfully created deployment: redis-master
INFO[0000] Successfully created ImageStream: redis-master

Your application has been deployed to OpenShift. You can run 'oc get dc,svc,is' for details.

<span class="w">$ </span><span class="nc">oc</span><span class="kv"> get dc,svc,is
</span>NAME               REVISION                              DESIRED       CURRENT    TRIGGERED BY
dc/frontend        0                                     1             0          config,image(frontend:v4)
dc/redis-master    0                                     1             0          config,image(redis-master:e2e)
dc/redis-slave     0                                     1             0          config,image(redis-slave:v1)
NAME               CLUSTER-IP                            EXTERNAL-IP   PORT(S)    AGE
svc/frontend       172.30.46.64                          &lt;none&gt;        80/TCP     8s
svc/redis-master   172.30.144.56                         &lt;none&gt;        6379/TCP   8s
svc/redis-slave    172.30.75.245                         &lt;none&gt;        6379/TCP   8s
NAME               DOCKER REPO                           TAGS          UPDATED
is/frontend        172.30.12.200:5000/fff/frontend                     
is/redis-master    172.30.12.200:5000/fff/redis-master                 
is/redis-slave     172.30.12.200:5000/fff/redis-slave    v1  
</code></pre>
</div>

<p>Note:</p>

<ul>
  <li>You must have a running OpenShift cluster with a pre-configured <code class="highlighter-rouge">oc</code> context (<code class="highlighter-rouge">oc login</code>)</li>
</ul>

<h2 id="kompose-down">Kompose down</h2>

<p>Once you have deployed “composed” application to Kubernetes, <code class="highlighter-rouge">kompose down</code> will help you to take the application out by deleting its deployments and services. If you need to remove other resources, use the ‘kubectl’ command.</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> --file docker-guestbook.yml down
</span>INFO[0000] Successfully deleted service: redis-master   
INFO[0004] Successfully deleted deployment: redis-master
INFO[0004] Successfully deleted service: redis-slave    
INFO[0008] Successfully deleted deployment: redis-slave
INFO[0009] Successfully deleted service: frontend       
INFO[0013] Successfully deleted deployment: frontend
</code></pre>
</div>
<p>Note:</p>
<ul>
  <li>You must have a running Kubernetes cluster with a pre-configured kubectl context.</li>
</ul>

<h2 id="alternate-formats">Alternate formats</h2>

<p>The default <code class="highlighter-rouge">kompose</code> transformation will generate Kubernetes <a href="http://kubernetes.io/docs/user-guide/deployments/">Deployments</a> and <a href="http://kubernetes.io/docs/user-guide/services/">Services</a>, in yaml format. You have alternative option to generate json with <code class="highlighter-rouge">-j</code>. Also, you can alternatively generate <a href="http://kubernetes.io/docs/user-guide/replication-controller/">Replication Controllers</a> objects, <a href="http://kubernetes.io/docs/admin/daemons/">Deamon Sets</a>, or <a href="https://github.com/helm/helm">Helm</a> charts.</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> convert
</span>file "redis-svc.yaml" created
file "web-svc.yaml" created
file "redis-deployment.yaml" created
file "web-deployment.yaml" created
</code></pre>
</div>
<p>The <code class="highlighter-rouge">*-deployment.json</code> files contain the Deployment objects.</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> convert --rc
</span>file "redis-svc.yaml" created
file "web-svc.yaml" created
file "redis-rc.yaml" created
file "web-rc.yaml" created
</code></pre>
</div>

<p>The <code class="highlighter-rouge">*-rc.yaml</code> files contain the Replication Controller objects. If you want to specify replicas (default is 1), use <code class="highlighter-rouge">--replicas</code> flag: <code class="highlighter-rouge">$ kompose convert --rc --replicas 3</code></p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> convert --ds
</span>file "redis-svc.yaml" created
file "web-svc.yaml" created
file "redis-daemonset.yaml" created
file "web-daemonset.yaml" created
</code></pre>
</div>

<p>The <code class="highlighter-rouge">*-daemonset.yaml</code> files contain the Daemon Set objects</p>

<p>If you want to generate a Chart to be used with <a href="https://github.com/kubernetes/helm">Helm</a> simply do:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">kompose</span><span class="kv"> convert -c
</span>file "web-svc.yaml" created
file "redis-svc.yaml" created
file "web-deployment.yaml" created
file "redis-deployment.yaml" created
chart created in "./docker-compose/"

<span class="w">$ </span><span class="nc">tree</span><span class="kv"> docker-compose/
</span>docker-compose
├── Chart.yaml
├── README.md
└── templates
    ├── redis-deployment.yaml
    ├── redis-svc.yaml
    ├── web-deployment.yaml
    └── web-svc.yaml
</code></pre>
</div>

<p>The chart structure is aimed at providing a skeleton for building your Helm charts.</p>

<h2 id="unsupported-docker-compose-configuration-options">Unsupported docker-compose configuration options</h2>

<p>Currently <code class="highlighter-rouge">kompose</code> does not support the following Docker Compose options.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"build", "cgroup_parent", "devices", "depends_on", "dns", "dns_search", "domainname", "env_file", "extends", "external_links", "extra_hosts", "hostname", "ipc", "logging", "mac_address", "mem_limit", "memswap_limit", "network_mode", "networks", "pid", "security_opt", "shm_size", "stop_signal", "volume_driver", "uts", "read_only", "stdin_open", "tty", "user", "ulimits", "dockerfile", "net"
</code></pre>
</div>

<p>For example:</p>

<div class="language-console highlighter-rouge"><pre class="highlight"><code><span class="w">$ </span><span class="nc">cat</span><span class="kv"> nginx.yml
</span>nginx:
  image: nginx
  dockerfile: foobar
  build: ./foobar
  cap_add:
    - ALL
  container_name: foobar

<span class="w">$ </span><span class="nc">kompose</span><span class="kv"> -f nginx.yml convert
</span>WARN[0000] Unsupported key build - ignoring             
WARN[0000] Unsupported key cap_add - ignoring           
WARN[0000] Unsupported key dockerfile - ignoring
</code></pre>
</div>

<h2 id="labels">Labels</h2>

<p><code class="highlighter-rouge">kompose</code> supports Kompose-specific labels within the <code class="highlighter-rouge">docker-compose.yml</code> file in order to explicitly define a service’s behavior upon conversion.</p>

<ul>
  <li>kompose.service.type defines the type of service to be created.</li>
</ul>

<p>For example:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span>
<span class="s">services</span><span class="pi">:</span> 
  <span class="s">nginx</span><span class="pi">:</span>
    <span class="s">image</span><span class="pi">:</span> <span class="s">nginx</span>
    <span class="s">dockerfile</span><span class="pi">:</span> <span class="s">foobar</span>
    <span class="s">build</span><span class="pi">:</span> <span class="s">./foobar</span>
    <span class="s">cap_add</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">ALL</span>
    <span class="s">container_name</span><span class="pi">:</span> <span class="s">foobar</span>
    <span class="s">labels</span><span class="pi">:</span> 
      <span class="s">kompose.service.type</span><span class="pi">:</span> <span class="s">nodeport</span>
</code></pre>
</div>

<ul>
  <li>kompose.service.expose defines if the service needs to be made accessible from outside the cluster or not. If the value is set to “true”, the provider sets the endpoint automatically, and for any other value, the value is set as the hostname. If multiple ports are defined in a service, the first one is chosen to be the exposed.
    <ul>
      <li>For the Kubernetes provider, an ingress resource is created and it is assumed that an ingress controller has already been configured.</li>
      <li>For the OpenShift provider, a route is created.</li>
    </ul>
  </li>
</ul>

<p>For example:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span>
<span class="s">services</span><span class="pi">:</span>
  <span class="s">web</span><span class="pi">:</span>
    <span class="s">image</span><span class="pi">:</span> <span class="s">tuna/docker-counter23</span>
    <span class="s">ports</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s2">"</span><span class="s">5000:5000"</span>
    <span class="s">links</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s">redis</span>
    <span class="s">labels</span><span class="pi">:</span>
      <span class="s">kompose.service.expose</span><span class="pi">:</span> <span class="s2">"</span><span class="s">counter.example.com"</span>
  <span class="s">redis</span><span class="pi">:</span>
    <span class="s">image</span><span class="pi">:</span> <span class="s">redis:3.0</span>
    <span class="s">ports</span><span class="pi">:</span>
     <span class="pi">-</span> <span class="s2">"</span><span class="s">6379"</span>
</code></pre>
</div>

<p>The currently supported options are:</p>

<table>
  <thead>
    <tr>
      <th>Key</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>kompose.service.type</td>
      <td>nodeport / clusterip / loadbalancer</td>
    </tr>
    <tr>
      <td>kompose.service.expose</td>
      <td>true / hostname</td>
    </tr>
  </tbody>
</table>

<h2 id="restart">Restart</h2>

<p>If you want to create normal pods without controllers you can use <code class="highlighter-rouge">restart</code> construct of docker-compose to define that. Follow table below to see what heppens on the <code class="highlighter-rouge">restart</code> value.</p>

<table>
  <thead>
    <tr>
      <th><code class="highlighter-rouge">docker-compose</code> <code class="highlighter-rouge">restart</code></th>
      <th>object created</th>
      <th>Pod <code class="highlighter-rouge">restartPolicy</code></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">""</code></td>
      <td>controller object</td>
      <td><code class="highlighter-rouge">Always</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">always</code></td>
      <td>controller object</td>
      <td><code class="highlighter-rouge">Always</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">on-failure</code></td>
      <td>Pod</td>
      <td><code class="highlighter-rouge">OnFailure</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">no</code></td>
      <td>Pod</td>
      <td><code class="highlighter-rouge">Never</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Note</strong>: controller object could be <code class="highlighter-rouge">deployment</code> or <code class="highlighter-rouge">replicationcontroller</code>, etc.</p>

<p>For e.g. <code class="highlighter-rouge">mariadb</code> service will become pod down here.</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">version</span><span class="pi">:</span> <span class="s2">"</span><span class="s">2"</span>

<span class="s">services</span><span class="pi">:</span>
  <span class="s">mariadb</span><span class="pi">:</span>
    <span class="s">image</span><span class="pi">:</span> <span class="s">centos/mariadb</span>
    <span class="s">restart</span><span class="pi">:</span> <span class="s2">"</span><span class="s">no"</span>
</code></pre>
</div>


        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/tools/kompose/user-guide.md?pixel" alt="Analytics" /></a>
        
		<script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/tools/kompose/user-guide/",
		        "title" : "Kompose User Guide",
		        "permalink" : "http://kubernetes.github.io/docs/tools/kompose/user-guide/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
		</script>
		<a href="" onclick="window.open('https://github.com/kubernetes/kubernetes.github.io/issues/new?title=Issue%20with%20' +
		window.location.pathname)" class="button issue">Create an Issue</a>
		<a href="/editdocs#docs/tools/kompose/user-guide.md" class="button issue">Edit this Page</a>
	
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/partners/">Partners</a>
			<a href="/community/">Community</a>
			<a href="/case-studies/">Case Studies</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
				<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://groups.google.com/forum/#!forum/kubernetes-users" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<a href="//get.k8s.io" class="button">Download K8s</a>
				<a href="https://github.com/kubernetes/kubernetes" class="button">Contribute to the K8s codebase</a>
			</div>
		</div>
		<div id="miceType" class="center">
			&copy; 2017 The Kubernetes Authors | Documentation Distributed under <a href="https://github.com/kubernetes/kubernetes.github.io/blob/master/LICENSE" class="light-text">CC BY 4.0</a>
		</div>
		<div id="miceType" class="center">
			Copyright &copy; 2017 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">https://www.linuxfoundation.org/trademark-usage</a>
		</div>
	</main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
