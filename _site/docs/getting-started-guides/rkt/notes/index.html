
  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  


<!Doctype html>
<html id="docs" class="Support">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
    <link rel="stylesheet" href="/css/styles.css"/>
    <link rel="stylesheet" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" href="/css/sweetalert.css">
    
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/sweetalert.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Known Issues when Using rkt - Kubernetes</title>
<meta property="og:title" content="Known Issues when Using rkt" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://localhost:4000/docs/getting-started-guides/rkt/notes/" />
<meta property="og:url" content="http://localhost:4000/docs/getting-started-guides/rkt/notes/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "WebPage",
"headline": "Known Issues when Using rkt",
"description": "Production-Grade Container Orchestration",
"publisher": {"@type": "Organization",
"logo": {"@type": "ImageObject",
"url": "http://localhost:4000/images/favicon.png"}},
"url": "http://localhost:4000/docs/getting-started-guides/rkt/notes/"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/">View Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
        </ul>
        <!-- <a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try IFC</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/hellonode/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple ifc cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/">Documentation</a></h3>
            <p>Learn how to use ifc with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other ifc users and the ifc authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.ifc.io">Blog</a></h3>
            <p>Read the latest news for ifc and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core ifc code base?</h5>
            <a href="https://github.com/ifc/ifc" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/ifcio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/ifc/ifc" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/ifc" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/ifc-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Support</h1>
  <h5>Troubleshooting resources, frequently asked questions, and community support channels.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/" >DOCS HOME</a></li>
      <li><a href="/docs/user-guide/" >GUIDES</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
      <li><a href="/docs/tools/" >TOOLS</a></li>
      <!-- <li><a href="/docs/samples/" >SAMPLES</a></li> -->
      <li><a href="/docs/troubleshooting/" class="YAH">SUPPORT</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    </div>
  </div>
</section>

<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
        
          
  

    

    
      <a class="item" data-title="Support" href="/docs/troubleshooting/"></a>
    
  

  
    <div class="item" data-title="Troubleshooting">
      <div class="container">
        
  

    

    
      <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Frequently Asked Questions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="User FAQ" href="/docs/faq/user.md"></a>
    
  

  

    

    
      <a class="item" data-title="Developer FAQ" href="/docs/faq/developer.md"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Contributing to the IFC Docs">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Contributing to the Kubernetes Documentation" href="/editdocs/"></a>
    
  

  

    

    
      <a class="item" data-title="Creating a Documentation Pull Request" href="/docs/contribute/create-pull-request/"></a>
    
  

  

    

    
      <a class="item" data-title="Writing a New Topic" href="/docs/contribute/write-new-topic/"></a>
    
  

  

    

    
      <a class="item" data-title="Staging Your Documentation Changes" href="/docs/contribute/stage-documentation-changes/"></a>
    
  

  

    

    
      <a class="item" data-title="Using Page Templates" href="/docs/contribute/page-templates/"></a>
    
  

  

    

    
      <a class="item" data-title="Reviewing Documentation Issues" href="/docs/contribute/review-issues/"></a>
    
  

  

    

    
      <a class="item" data-title="Documentation Style Guide" href="/docs/contribute/style-guide/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Other Resources">
      <div class="container">
        
  

    

    
      <a class="item" data-title="IFC Issue Tracker on GitHub" href="https://github.com/"></a>
    
  

  

    

    
      <a class="item" data-title="Report a Security Vulnerability" href="/docs/reporting-security-issues/"></a>
    
  

  

    

    
      <a class="item" data-title="IFC Release Notes" href="https://github.com/"></a>
    
  

  

    

    
      <a class="item" data-title="Release Roadmap" href="https://github.com/"></a>
    
  


      </div>
    </div>
  


        
        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/getting-started-guides/rkt/notes.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>Known Issues when Using rkt</h1>
        

        <p>The following features either are not supported or have large caveats when using the rkt container runtime. Increasing support for these items and others, including reasonable feature parity with the default container engine, is planned through future releases.</p>

<h2 id="non-existent-host-volume-paths">Non-existent host volume paths</h2>

<p>When mounting a host volume path that does not exist, rkt will error out. Under the Docker runtime, an empty directory will be created at the referenced path.</p>

<p>An example of a pod which will error out:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">labels</span><span class="pi">:</span>
    <span class="s">name</span><span class="pi">:</span> <span class="s">mount-dne</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">mount-dne</span>
<span class="s">spec</span><span class="pi">:</span>
  <span class="s">volumes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">does-not-exist</span>
    <span class="s">hostPath</span><span class="pi">:</span>
      <span class="s">path</span><span class="pi">:</span> <span class="s">/does/not/exist</span>
  <span class="s">containers</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">name</span><span class="pi">:</span> <span class="s">exit</span>
      <span class="s">image</span><span class="pi">:</span> <span class="s">busybox</span>
      <span class="s">command</span><span class="pi">:</span> <span class="pi">[</span><span class="s2">"</span><span class="s">sh"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">-c"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">ls</span><span class="nv"> </span><span class="s">/test;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">60"</span><span class="pi">]</span>
      <span class="s">volumeMounts</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">mountPath</span><span class="pi">:</span> <span class="s">/test</span>
        <span class="s">name</span><span class="pi">:</span> <span class="s">does-not-exist</span>
</code></pre>
</div>

<p>Also note that if <code class="highlighter-rouge">subPath</code> is specified in the container’s volumeMounts and the <code class="highlighter-rouge">subPath</code> doesn’t exist in the corresponding volume, the pod execution will fail as well.</p>

<h2 id="kubectl-attach">Kubectl attach</h2>

<p>The <code class="highlighter-rouge">kubectl attach</code> command does not work under the rkt container runtime.
Because of this, some flags in <code class="highlighter-rouge">kubectl run</code> are not supported, including:</p>

<ul>
  <li><code class="highlighter-rouge">--attach=true</code></li>
  <li><code class="highlighter-rouge">--leave-stdin-open=true</code></li>
  <li><code class="highlighter-rouge">--rm=true</code></li>
</ul>

<h2 id="port-forwarding-for-kvm-and-fly-stage1s">Port forwarding for kvm and fly stage1s</h2>

<p><code class="highlighter-rouge">kubectl port-forward</code> is not supported for pods that are executed with <code class="highlighter-rouge">stage1-kvm</code> or <code class="highlighter-rouge">stage1-fly</code>.</p>

<h2 id="volume-relabeling">Volume relabeling</h2>

<p>Currently rkt supports only <em>per-pod</em> volume relabeling. After relabeling, the mounted volume is shared by all containers in the pod. There is not yet a way to make the relabeled volume accessible to only one, or some subset, of containers in the pod. <a href="https://github.com/kubernetes/kubernetes/issues/28187">Kubernetes issue # 28187</a> has the details.</p>

<h2 id="kubectl-get-logs">kubectl get logs</h2>

<p>Under rktnetes, <code class="highlighter-rouge">kubectl get logs</code> currently cannot get logs from applications that write them to directly to <code class="highlighter-rouge">/dev/stdout</code>. Currently such log messages are printed on the node’s console.</p>

<h2 id="init-containers">Init containers</h2>

<p>The beta <a href="/docs/user-guide/pods/init-containers.md">init container</a> feature is currently not supported.</p>

<h2 id="container-restart-back-off">Container restart back-off</h2>

<p>Exponential restart back-off for a failing container is currently not supported.</p>

<h2 id="experimental-nvidia-gpu-support">Experimental NVIDIA GPU support</h2>

<p>The <code class="highlighter-rouge">--experimental-nvidia-gpus</code> flag, and related <a href="https://github.com/kubernetes/kubernetes/blob/master/docs/proposals/gpu-support.md">GPU features</a> are not supported.</p>

<h2 id="qos-classes">QoS Classes</h2>

<p>Under rkt, QoS classes do not adjust the <code class="highlighter-rouge">OOM Score</code> of containers as occurs under Docker.</p>

<h2 id="hostpid-and-hostipc-namespaces">HostPID and HostIPC namespaces</h2>

<p>Setting the hostPID or hostIPC flags on a pod is not supported.</p>

<p>For example, the following pod will not run correctly:</p>

<div class="language-yaml highlighter-rouge"><pre class="highlight"><code><span class="s">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="s">kind</span><span class="pi">:</span> <span class="s">Pod</span>
<span class="s">metadata</span><span class="pi">:</span>
  <span class="s">labels</span><span class="pi">:</span>
    <span class="s">name</span><span class="pi">:</span> <span class="s">host-ipc-pid</span>
  <span class="s">name</span><span class="pi">:</span> <span class="s">host-ipc-pid</span>
<span class="s">spec</span><span class="pi">:</span>
  <span class="s">hostIPC</span><span class="pi">:</span> <span class="s">true</span>
  <span class="s">hostPID</span><span class="pi">:</span> <span class="s">true</span>
  <span class="s">containers</span><span class="pi">:</span>
    <span class="s">...</span>
</code></pre>
</div>

<p>On the other hand, when running the pod with <a href="https://coreos.com/rkt/docs/latest/running-fly-stage1.html">stage1-fly</a>, the pod will be run in the host namespace.</p>

<h2 id="container-image-updates-patch">Container image updates (patch)</h2>

<p>Patching a pod to change the image will result in the entire pod restarting, not just the container that was changed.</p>

<h2 id="imagepullpolicy-always">ImagePullPolicy ‘Always’</h2>

<p>When the container’s image pull policy is <code class="highlighter-rouge">Always</code>, rkt will always pull the image from remote even if the image has not changed at all.
This can add significant latency for large images.
The issue is tracked by rkt upstream at <a href="https://github.com/coreos/rkt/issues/2937">#2937</a>.</p>


        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/rkt/notes.md?pixel" alt="Analytics" /></a>
        
		<!-- <script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/getting-started-guides/rkt/notes/",
		        "title" : "Known Issues when Using rkt",
		        "permalink" : "http://kubernetes.github.io/docs/getting-started-guides/rkt/notes/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
		</script> -->

  <!-- Need to attach listener to the 'make an issue' button below -->

		<a href="" onclick="window.open('https://github.com/kubernetes/kubernetes.github.io/issues/new?title=Issue%20with%20' +
		window.location.pathname)" class="button issue">Create an Issue</a>
		<a href="/editdocs#docs/getting-started-guides/rkt/notes.md" class="button issue">Edit this Page</a>
	
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://www.buildingsmart-tech.org/blogs">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/buildingSMART" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/BuildingSMART" class="github"><span>Github</span></a>
				<a href="https://buildingsmart-team-slackin.herokuapp.com/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/ifc" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://buildingsmartapi.mobilize.io/" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<a href="https://www.linkedin.com/groups/3690870" class="linkedIn"><span>LinkedIn</span></a>
			</div>
			<div>
				<span>I wish this page</span>
				<input type="text" id="wishField" name="wishField" placeholder="enter your wish">
			</div>
		</div>
		<div id="miceType" class="center">
			<!-- &copy; 2017 The Kubernetes Authors | Documentation Distributed under <a href="https://github.com/kubernetes/kubernetes.github.io/blob/master/LICENSE" class="light-text">CC BY 4.0</a> -->
		</div>
		<div id="miceType" class="center">
			&copy; 2017 Buildingsmart
			<!-- Copyright &copy; 2017 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">https://www.linuxfoundation.org/trademark-usage</a> -->
		</div>
	</main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
