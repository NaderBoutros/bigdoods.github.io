
  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  

  
    
    

  


<!Doctype html>
<html id="docs" class="Support">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png">
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href='https://fonts.googleapis.com/css?family=Roboto+Mono' type='text/css'>
    <link rel="stylesheet" href="/css/styles.css"/>
    <link rel="stylesheet" href="/css/jquery-ui.min.css">
    <link rel="stylesheet" href="/css/sweetalert.css">
    
    <script src="/js/jquery-2.2.0.min.js"></script>
    <script src="/js/jquery-ui.min.js"></script>
    <script src="/js/script.js"></script>
    <script src="/js/sweetalert.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- Begin Jekyll SEO tag v2.1.0 -->
<title>Setting up Kubernetes with Juju - Kubernetes</title>
<meta property="og:title" content="Setting up Kubernetes with Juju" />
<meta name="description" content="Production-Grade Container Orchestration" />
<meta property="og:description" content="Production-Grade Container Orchestration" />
<link rel="canonical" href="http://localhost:4000/docs/getting-started-guides/ubuntu/installation/" />
<meta property="og:url" content="http://localhost:4000/docs/getting-started-guides/ubuntu/installation/" />
<meta property="og:site_name" content="Kubernetes" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "WebPage",
"headline": "Setting up Kubernetes with Juju",
"description": "Production-Grade Container Orchestration",
"publisher": {"@type": "Organization",
"logo": {"@type": "ImageObject",
"url": "http://localhost:4000/images/favicon.png"}},
"url": "http://localhost:4000/docs/getting-started-guides/ubuntu/installation/"}</script>
<!-- End Jekyll SEO tag -->

</head>


<body>

<div id="cellophane" onclick="kub.toggleMenu()"></div>

<header>
    <a href="/" class="logo"></a>

    <div class="nav-buttons" data-auto-burger="primary">
        <ul class="global-nav">
            <li><a href="/docs/">View Documentation</a></li>
            <li><a href="http://blog.kubernetes.io/">Blog</a></li>
            <li><a href="/partners/">Partners</a></li>
            <li><a href="/community/">Community</a></li>
            <li><a href="/case-studies/">Case Studies</a></li>
        </ul>
        <!-- <a href="/docs/" class="button" id="viewDocs" data-auto-burger-exclude>View Documentation</a> -->
        <a href="/docs/tutorials/kubernetes-basics/" class="button" id="tryKubernetes" data-auto-burger-exclude>Try IFC</a>
        <button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
    </div>

    <nav id="mainNav">
        <main data-auto-burger="primary">
        <div class="nav-box">
            <h3><a href="/docs/hellonode/">Get Started</a></h3>
            <p>Ready to get your hands dirty? Build a simple ifc cluster that runs "Hello World" for Node.js.</p>
        </div>
        <div class="nav-box">
            <h3><a href="/docs/">Documentation</a></h3>
            <p>Learn how to use ifc with the use of walkthroughs, samples, and reference documentation. You can even <a href="/editdocs/" data-auto-burger-exclude>help contribute to the docs</a>!</p>
        </div>
        <div class="nav-box">
            <h3><a href="/community/">Community</a></h3>
            <p>If you need help, you can connect with other ifc users and the ifc authors, attend community events, and watch video presentations from around the web.</p>
        </div>
        <div class="nav-box">
            <h3><a href="http://blog.ifc.io">Blog</a></h3>
            <p>Read the latest news for ifc and the containers space in general, and get technical how-tos hot off the presses.</p>
        </div>
        </main>
        <main data-auto-burger="primary">
        <div class="left">
            <h5 class="github-invite">Interested in hacking on the core ifc code base?</h5>
            <a href="https://github.com/ifc/ifc" class="button" data-auto-burger-exclude>View On Github</a>
        </div>

        <div class="right">
            <h5 class="github-invite">Explore the community</h5>
            <div class="social">
                <a href="https://twitter.com/ifcio" class="twitter"><span>Twitter</span></a>
                <a href="https://github.com/ifc/ifc" class="github"><span>Github</span></a>
                <a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
                <a href="http://stackoverflow.com/questions/tagged/ifc" class="stack-overflow"><span>Stack Overflow</span></a>
                <a href="https://groups.google.com/forum/#!forum/ifc-users" class="mailing-list"><span>Mailing List</span></a>
                <a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
            </div>
        </div>
        <div class="clear" style="clear: both"></div>
        </main>
    </nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
  <h1>Support</h1>
  <h5>Troubleshooting resources, frequently asked questions, and community support channels.</h5>
  <div id="vendorStrip" class="light-text">
    <ul>
      <li><a href="/docs/" >DOCS HOME</a></li>
      <li><a href="/docs/user-guide/" >GUIDES</a></li>
      <li><a href="/docs/tutorials/" >TUTORIALS</a></li>
      <li><a href="/docs/tasks/" >TASKS</a></li>
      <li><a href="/docs/concepts/" >CONCEPTS</a></li>
      <li><a href="/docs/reference/" >REFERENCE</a></li>
      <li><a href="/docs/tools/" >TOOLS</a></li>
      <!-- <li><a href="/docs/samples/" >SAMPLES</a></li> -->
      <li><a href="/docs/troubleshooting/" class="YAH">SUPPORT</a></li>
    </ul>
    <div id="searchBox">
      <input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
    </div>
  </div>
</section>

<section id="encyclopedia">
  <div id="docsToc">
        <div class="pi-accordion">
        
          
  

    

    
      <a class="item" data-title="Support" href="/docs/troubleshooting/"></a>
    
  

  
    <div class="item" data-title="Troubleshooting">
      <div class="container">
        
  

    

    
      <a class="item" data-title="User Guide" href="/docs/user-guide/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Frequently Asked Questions">
      <div class="container">
        
  

    

    
      <a class="item" data-title="User FAQ" href="/docs/faq/user.md"></a>
    
  

  

    

    
      <a class="item" data-title="Developer FAQ" href="/docs/faq/developer.md"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Contributing to the IFC Docs">
      <div class="container">
        
  

    

    
      <a class="item" data-title="Contributing to the Kubernetes Documentation" href="/editdocs/"></a>
    
  

  

    

    
      <a class="item" data-title="Creating a Documentation Pull Request" href="/docs/contribute/create-pull-request/"></a>
    
  

  

    

    
      <a class="item" data-title="Writing a New Topic" href="/docs/contribute/write-new-topic/"></a>
    
  

  

    

    
      <a class="item" data-title="Staging Your Documentation Changes" href="/docs/contribute/stage-documentation-changes/"></a>
    
  

  

    

    
      <a class="item" data-title="Using Page Templates" href="/docs/contribute/page-templates/"></a>
    
  

  

    

    
      <a class="item" data-title="Reviewing Documentation Issues" href="/docs/contribute/review-issues/"></a>
    
  

  

    

    
      <a class="item" data-title="Documentation Style Guide" href="/docs/contribute/style-guide/"></a>
    
  


      </div>
    </div>
  

  
    <div class="item" data-title="Other Resources">
      <div class="container">
        
  

    

    
      <a class="item" data-title="IFC Issue Tracker on GitHub" href="https://github.com/"></a>
    
  

  

    

    
      <a class="item" data-title="Report a Security Vulnerability" href="/docs/reporting-security-issues/"></a>
    
  

  

    

    
      <a class="item" data-title="IFC Release Notes" href="https://github.com/"></a>
    
  

  

    

    
      <a class="item" data-title="Release Roadmap" href="https://github.com/"></a>
    
  


      </div>
    </div>
  


        
        </div> <!-- /pi-accordion -->
    <button class="push-menu-close-button" onclick="kub.toggleToc()"></button>
  </div> <!-- /docsToc -->

  <div id="docsContent">
        <p><a href="/editdocs#docs/getting-started-guides/ubuntu/installation.md" id="editPageButton">Edit This Page</a></p>

        
          <h1>Setting up Kubernetes with Juju</h1>
        

        
<p>Out of the box it comes with the following components on 9 machines:</p>

<ul>
  <li>Kubernetes (automated deployment, operations, and scaling)
    <ul>
      <li>Three node Kubernetes cluster with one master and two worker nodes.</li>
      <li>TLS used for communication between units for security.</li>
      <li>Flannel Software Defined Network (SDN) plugin</li>
      <li>A load balancer for HA kubernetes-master (Experimental)</li>
      <li>Optional Ingress Controller (on worker)</li>
      <li>Optional Dashboard addon (on master) including Heapster for cluster monitoring</li>
    </ul>
  </li>
  <li>EasyRSA
    <ul>
      <li>Performs the role of a certificate authority serving self signed certificates
to the requesting units of the cluster.</li>
    </ul>
  </li>
  <li>ETCD (distributed key value store)
    <ul>
      <li>Three unit cluster for reliability.</li>
    </ul>
  </li>
</ul>

<p>The Juju Kubernetes work is curated by a dedicated team of community members,
let us know how we are doing. If you find any problems please open an
<a href="https://github.com/juju-solutions/bundle-canonical-kubernetes">issue on our tracker</a>
so we can find them.</p>

<h2 id="support-level">Support Level</h2>

<table>
  <thead>
    <tr>
      <th>IaaS Provider</th>
      <th>Config. Mgmt</th>
      <th>OS</th>
      <th>Networking</th>
      <th>Docs</th>
      <th>Conforms</th>
      <th>Support Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Amazon Web Services (AWS)</td>
      <td>Juju</td>
      <td>Ubuntu</td>
      <td>flannel, calico*</td>
      <td><a href="/docs/getting-started-guides/ubuntu">docs</a></td>
      <td> </td>
      <td><a href="https://ubuntu.com/cloud/kubernetes">Commercial</a>, <a href="https://github.com/juju-solutions/bundle-kubernetes-core">Community</a> ( <a href="https://github.com/mbruzek">@mbruzek</a>, <a href="https://github.com/chuckbutler">@chuckbutler</a> )</td>
    </tr>
    <tr>
      <td>OpenStack</td>
      <td>Juju</td>
      <td>Ubuntu</td>
      <td>flannel, calico</td>
      <td><a href="/docs/getting-started-guides/ubuntu">docs</a></td>
      <td> </td>
      <td><a href="https://ubuntu.com/cloud/kubernetes">Commercial</a>, <a href="https://github.com/juju-solutions/bundle-kubernetes-core">Community</a> ( <a href="https://github.com/mbruzek">@mbruzek</a>, <a href="https://github.com/chuckbutler">@chuckbutler</a> )</td>
    </tr>
    <tr>
      <td>Microsoft Azure</td>
      <td>Juju</td>
      <td>Ubuntu</td>
      <td>flannel</td>
      <td><a href="/docs/getting-started-guides/ubuntu">docs</a></td>
      <td> </td>
      <td><a href="https://ubuntu.com/cloud/kubernetes">Commercial</a>, <a href="https://github.com/juju-solutions/bundle-kubernetes-core">Community</a> ( <a href="https://github.com/mbruzek">@mbruzek</a>, <a href="https://github.com/chuckbutler">@chuckbutler</a> )</td>
    </tr>
    <tr>
      <td>Google Compute Engine (GCE)</td>
      <td>Juju</td>
      <td>Ubuntu</td>
      <td>flannel, calico</td>
      <td><a href="/docs/getting-started-guides/ubuntu">docs</a></td>
      <td> </td>
      <td><a href="https://ubuntu.com/cloud/kubernetes">Commercial</a>, <a href="https://github.com/juju-solutions/bundle-kubernetes-core">Community</a> ( <a href="https://github.com/mbruzek">@mbruzek</a>, <a href="https://github.com/chuckbutler">@chuckbutler</a> )</td>
    </tr>
    <tr>
      <td>Joyent</td>
      <td>Juju</td>
      <td>Ubuntu</td>
      <td>flannel</td>
      <td><a href="/docs/getting-started-guides/ubuntu">docs</a></td>
      <td> </td>
      <td><a href="https://ubuntu.com/cloud/kubernetes">Commercial</a>, <a href="https://github.com/juju-solutions/bundle-kubernetes-core">Community</a> ( <a href="https://github.com/mbruzek">@mbruzek</a>, <a href="https://github.com/chuckbutler">@chuckbutler</a> )</td>
    </tr>
    <tr>
      <td>Rackspace</td>
      <td>Juju</td>
      <td>Ubuntu</td>
      <td>flannel</td>
      <td><a href="/docs/getting-started-guides/ubuntu">docs</a></td>
      <td> </td>
      <td><a href="https://ubuntu.com/cloud/kubernetes">Commercial</a>, <a href="https://github.com/juju-solutions/bundle-kubernetes-core">Community</a> ( <a href="https://github.com/mbruzek">@mbruzek</a>, <a href="https://github.com/chuckbutler">@chuckbutler</a> )</td>
    </tr>
    <tr>
      <td>VMWare vSphere</td>
      <td>Juju</td>
      <td>Ubuntu</td>
      <td>flannel, calico</td>
      <td><a href="/docs/getting-started-guides/ubuntu">docs</a></td>
      <td> </td>
      <td><a href="https://ubuntu.com/cloud/kubernetes">Commercial</a>, <a href="https://github.com/juju-solutions/bundle-kubernetes-core">Community</a> ( <a href="https://github.com/mbruzek">@mbruzek</a>, <a href="https://github.com/chuckbutler">@chuckbutler</a> )</td>
    </tr>
    <tr>
      <td>Bare Metal (MAAS)</td>
      <td>Juju</td>
      <td>Ubuntu</td>
      <td>flannel, calico</td>
      <td><a href="/docs/getting-started-guides/ubuntu">docs</a></td>
      <td> </td>
      <td><a href="https://ubuntu.com/cloud/kubernetes">Commercial</a>, <a href="https://github.com/juju-solutions/bundle-kubernetes-core">Community</a> ( <a href="https://github.com/mbruzek">@mbruzek</a>, <a href="https://github.com/chuckbutler">@chuckbutler</a> )</td>
    </tr>
  </tbody>
</table>

<p>For support level information on all solutions, see the <a href="/docs/getting-started-guides/#table-of-solutions">Table of solutions</a> chart.</p>

<p>Ubuntu 16.04 introduced the <a href="https://www.ubuntu.com/cloud/kubernetes">Canonical Distribution of Kubernetes</a>, a pure upstream distribution of Kubernetes designed for production usage. This page shows you how to deploy a cluster.</p>

<ul id="markdown-toc">
  <li><a href="#support-level" id="markdown-toc-support-level">Support Level</a></li>
  <li><a href="#before-you-begin" id="markdown-toc-before-you-begin">Before you begin</a></li>
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a>    <ul>
      <li><a href="#configure-juju-to-use-your-cloud-provider" id="markdown-toc-configure-juju-to-use-your-cloud-provider">Configure Juju to use your cloud provider</a></li>
    </ul>
  </li>
  <li><a href="#launch-a-kubernetes-cluster" id="markdown-toc-launch-a-kubernetes-cluster">Launch a Kubernetes cluster</a></li>
  <li><a href="#monitor-deployment" id="markdown-toc-monitor-deployment">Monitor deployment</a></li>
  <li><a href="#interacting-with-the-cluster" id="markdown-toc-interacting-with-the-cluster">Interacting with the cluster</a></li>
  <li><a href="#scale-up-cluster" id="markdown-toc-scale-up-cluster">Scale up cluster</a></li>
  <li><a href="#scale-out-cluster" id="markdown-toc-scale-out-cluster">Scale out cluster</a></li>
  <li><a href="#tear-down-cluster" id="markdown-toc-tear-down-cluster">Tear down cluster</a></li>
  <li><a href="#more-info" id="markdown-toc-more-info">More Info</a></li>
</ul>

<h2 id="before-you-begin">Before you begin</h2>

<h2 id="prerequisites">Prerequisites</h2>

<ul>
  <li>A working <a href="https://jujucharms.com/docs/2.0/getting-started-general">Juju client</a>; this does not have to be a Linux machine, it can also be Windows or OSX.</li>
  <li>A <a href="#cloud-compatibility">supported cloud</a>.
    <ul>
      <li>Bare Metal deployments are supported via <a href="http://maas.io">MAAS</a>. Refer to the <a href="http://maas.io/docs/">MAAS documentation</a> for configuration instructions.</li>
      <li>OpenStack deployments are currently only tested on Icehouse and newer.</li>
    </ul>
  </li>
  <li>Network access to the following domains
    <ul>
      <li>*.jujucharms.com</li>
      <li>gcr.io</li>
      <li>github.com</li>
      <li>Access to an Ubuntu mirror (public or private)</li>
    </ul>
  </li>
</ul>

<h3 id="configure-juju-to-use-your-cloud-provider">Configure Juju to use your cloud provider</h3>

<p>Deployment of the cluster is <a href="#cloud-compatibility">supported on a wide variety of public clouds</a>, private OpenStack clouds, or raw bare metal clusters. Bare metal deployments are supported via <a href="http://maas.io/">MAAS</a>.</p>

<p>After deciding which cloud to deploy to, follow the <a href="https://jujucharms.com/docs/devel/getting-started-general#2.-choose-a-cloud">cloud setup page</a> to configure deploying to that cloud.</p>

<p>Load your <a href="https://jujucharms.com/docs/2.0/credentials">cloud credentials</a> for each 
cloud provider you would like to use.</p>

<p>In this example</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju add-credential aws 
credential name: my_credentials
select auth-type [userpass, oauth, etc]: userpass
enter username: jorge
enter password: *******
</code></pre>
</div>

<p>You can also just auto load credentials for popular clouds with the <code class="highlighter-rouge">juju autoload-credentials</code> command, which will auto import your credentials from the default files and environment variables for each cloud.</p>

<p>Next we need to bootstrap a controller to manage the cluster. You need to define the cloud you want to bootstrap on, the region, and then any name for your controller node:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju update-clouds # This command ensures all the latest regions are up to date on your client
juju bootstrap aws/us-east-2 
</code></pre>
</div>
<p>or, another example, this time on Azure:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju bootstrap azure/centralus 
</code></pre>
</div>

<p>You will need a controller node for each cloud or region you are deploying to. See the <a href="https://jujucharms.com/docs/2.0/controllers">controller documentation</a> for more information.</p>

<p>Note that each controller can host multiple Kubernetes clusters in a given cloud or region.</p>

<h2 id="launch-a-kubernetes-cluster">Launch a Kubernetes cluster</h2>

<p>The following command will deploy the initial 9-node starter cluster. The speed of execution is very dependent of the performance of the cloud you’re deploying to:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju deploy canonical-kubernetes
</code></pre>
</div>

<p>After this command executes the cloud will then launch instances and begin the deployment process.</p>

<h2 id="monitor-deployment">Monitor deployment</h2>

<p>The <code class="highlighter-rouge">juju status</code> command provides information about each unit in the cluster. Use the <code class="highlighter-rouge">watch -c juju status --color</code> command to get a real-time view of the cluster as it deploys. When all the states are green and “Idle”, the cluster is ready to be used:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju status
</code></pre>
</div>

<p>Output:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Model    Controller     Cloud/Region   Version
default  aws-us-east-2  aws/us-east-2  2.0.1

App                    Version  Status       Scale  Charm                  Store       Rev  OS      Notes
easyrsa                3.0.1    active           1  easyrsa                jujucharms    3  ubuntu  
etcd                   2.2.5    active           3  etcd                   jujucharms   14  ubuntu  
flannel                0.6.1    maintenance      4  flannel                jujucharms    5  ubuntu  
kubeapi-load-balancer  1.10.0   active           1  kubeapi-load-balancer  jujucharms    3  ubuntu  exposed
kubernetes-master      1.4.5    active           1  kubernetes-master      jujucharms    6  ubuntu  
kubernetes-worker      1.4.5    active           3  kubernetes-worker      jujucharms    8  ubuntu  exposed
topbeat                         active           3  topbeat                jujucharms    5  ubuntu  

Unit                      Workload     Agent  Machine  Public address  Ports            Message
easyrsa/0*                active       idle   0        52.15.95.92                      Certificate Authority connected.
etcd/0                    active       idle   3        52.15.79.127    2379/tcp         Healthy with 3 known peers.
etcd/1*                   active       idle   4        52.15.111.66    2379/tcp         Healthy with 3 known peers. (leader)
etcd/2                    active       idle   5        52.15.144.25    2379/tcp         Healthy with 3 known peers.
kubeapi-load-balancer/0*  active       idle   7        52.15.84.179    443/tcp          Loadbalancer ready.
kubernetes-master/0*      active       idle   8        52.15.106.225   6443/tcp         Kubernetes master services ready.
  flannel/3               active       idle            52.15.106.225                    Flannel subnet 10.1.48.1/24
kubernetes-worker/0*      active       idle   9        52.15.153.246                    Kubernetes worker running.
  flannel/2               active       idle            52.15.153.246                    Flannel subnet 10.1.53.1/24
kubernetes-worker/1       active       idle   10       52.15.52.103                     Kubernetes worker running.
  flannel/0*              active       idle            52.15.52.103                     Flannel subnet 10.1.31.1/24
kubernetes-worker/2       active       idle   11       52.15.104.181                    Kubernetes worker running.
  flannel/1               active       idle            52.15.104.181                    Flannel subnet 10.1.83.1/24

Machine  State    DNS            Inst id              Series  AZ
0        started  52.15.95.92    i-06e66414008eca61c  xenial  us-east-2c
3        started  52.15.79.127   i-0038186d2c5103739  xenial  us-east-2b
4        started  52.15.111.66   i-0ac66c86a8ec93b18  xenial  us-east-2a
5        started  52.15.144.25   i-078cfe79313d598c9  xenial  us-east-2c
7        started  52.15.84.179   i-00fd70321a51b658b  xenial  us-east-2c
8        started  52.15.106.225  i-0109a5fc942c53ed7  xenial  us-east-2b
9        started  52.15.153.246  i-0ab63e34959cace8d  xenial  us-east-2b
10       started  52.15.52.103   i-0108a8cc0978954b5  xenial  us-east-2a
11       started  52.15.104.181  i-0f5562571c649f0f2  xenial  us-east-2c
</code></pre>
</div>

<h2 id="interacting-with-the-cluster">Interacting with the cluster</h2>

<p>After the cluster is deployed you may assume control over the cluster from any kubernetes-master, or kubernetes-worker node.</p>

<p>First you need to download the credentials and client application to your local workstation:</p>

<p>Create the kubectl config directory.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mkdir -p ~/.kube
</code></pre>
</div>
<p>Copy the kubeconfig file to the default location.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>juju scp kubernetes-master/0:config ~/.kube/config
</code></pre>
</div>

<p>Fetch a binary for the architecture you have deployed. If your client is a
different architecture you will need to get the appropriate <code class="highlighter-rouge">kubectl</code> binary
through other means. In this example we copy kubectl to <code class="highlighter-rouge">~/bin</code> for convenience, 
by default this should be in your $PATH.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mkdir -p ~/bin
juju scp kubernetes-master/0:kubectl ~/bin/kubectl
</code></pre>
</div>

<p>Query the cluster:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>kubectl cluster-info
</code></pre>
</div>

<p>Output:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Kubernetes master is running at https://52.15.104.227:443
Heapster is running at https://52.15.104.227:443/api/v1/proxy/namespaces/kube-system/services/heapster
KubeDNS is running at https://52.15.104.227:443/api/v1/proxy/namespaces/kube-system/services/kube-dns
Grafana is running at https://52.15.104.227:443/api/v1/proxy/namespaces/kube-system/services/monitoring-grafana
InfluxDB is running at https://52.15.104.227:443/api/v1/proxy/namespaces/kube-system/services/monitoring-influxdb
</code></pre>
</div>

<p>Congratulations, you’ve now set up a Kubernetes cluster!</p>

<h2 id="scale-up-cluster">Scale up cluster</h2>

<p>Want larger Kubernetes nodes? It is easy to request different sizes of cloud
resources from Juju by using <strong>constraints</strong>. You can increase the amount of
CPU or memory (RAM) in any of the systems requested by Juju. This allows you
to fine tune the Kubernetes cluster to fit your workload. Use flags on the
bootstrap command or as a separate <code class="highlighter-rouge">juju constraints</code> command. Look to the
<a href="https://jujucharms.com/docs/2.0/charms-constraints">Juju documentation for machine</a>
details.</p>

<h2 id="scale-out-cluster">Scale out cluster</h2>

<p>Need more workers? We just add more units:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>juju add-unit kubernetes-worker
</code></pre>
</div>

<p>Or multiple units at one time:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>juju add-unit -n3 kubernetes-worker
</code></pre>
</div>
<p>You can also ask for specific instance types or other machine-specific constraints. See the <a href="https://jujucharms.com/docs/stable/reference-constraints">constraints documentation</a> for more information. Here are some examples, note that generic constraints such as <code class="highlighter-rouge">cores</code> and <code class="highlighter-rouge">mem</code> are more portable between clouds. In this case we’ll ask for a specific instance type from AWS:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>juju <span class="nb">set</span>-constraints kubernetes-worker instance-type<span class="o">=</span>c4.large
juju add-unit kubernetes-worker
</code></pre>
</div>

<p>You can also scale the etcd charm for more fault tolerant key/value storage:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>juju add-unit -n3 etcd
</code></pre>
</div>
<p>It is strongly recommended to run an odd number of units for quorum.</p>

<h2 id="tear-down-cluster">Tear down cluster</h2>

<p>If you want stop the servers you can destroy the Juju model or the
controller. Use the <code class="highlighter-rouge">juju switch</code> command to get the current controller name:</p>

<div class="language-shell highlighter-rouge"><pre class="highlight"><code>juju switch
juju destroy-controller <span class="nv">$controllername</span> --destroy-all-models
</code></pre>
</div>
<p>This will shutdown and terminate all running instances on that cloud.</p>

<h2 id="more-info">More Info</h2>

<p>The Ubuntu Kubernetes deployment uses open-source operations, or operations as code, known as charms. These charms are assembled from layers which keeps the code smaller and more focused on the operations of just Kubernetes and its components.</p>

<p>The Kubernetes layer and bundles can be found in the <code class="highlighter-rouge">kubernetes</code>
project on github.com:</p>

<ul>
  <li><a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/juju/bundles">Bundle location</a></li>
  <li><a href="https://github.com/kubernetes/kubernetes/tree/master/cluster/juju/layers/kubernetes">Kubernetes charm layer location</a></li>
  <li><a href="https://jujucharms.com/canonical-kubernetes/">Canonical Kubernetes home</a></li>
</ul>

<p>Feature requests, bug reports, pull requests or any feedback would be much appreciated.</p>



        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/getting-started-guides/ubuntu/installation.md?pixel" alt="Analytics" /></a>
        
		<script type="text/javascript">
	        PDRTJS_settings_8345992 = {
		        "id" : "8345992",
		        "unique_id" : "/docs/getting-started-guides/ubuntu/installation/",
		        "title" : "Setting up Kubernetes with Juju",
		        "permalink" : "http://kubernetes.github.io/docs/getting-started-guides/ubuntu/installation/"
	        };
	        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
		</script>
		<a href="" onclick="window.open('https://github.com/kubernetes/kubernetes.github.io/issues/new?title=Issue%20with%20' +
		window.location.pathname)" class="button issue">Create an Issue</a>
		<a href="/editdocs#docs/getting-started-guides/ubuntu/installation.md" class="button issue">Edit this Page</a>
	
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://www.buildingsmart-tech.org/blogs">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<div>
				<a href="https://twitter.com/buildingSMART" class="twitter"><span>twitter</span></a>
				<a href="https://github.com/BuildingSMART" class="github"><span>Github</span></a>
				<a href="https://buildingsmart-team-slackin.herokuapp.com/" class="slack"><span>Slack</span></a>
			</div>
			<div>
				<a href="http://stackoverflow.com/questions/tagged/ifc" class="stack-overflow"><span>Stack Overflow</span></a>
				<a href="https://buildingsmartapi.mobilize.io/" class="mailing-list"><span>Mailing List</span></a>
				<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			</div>
			<div>
				<a href="https://www.linkedin.com/groups/3690870" class="linkedIn"><span>LinkedIn</span></a>
			</div>
			<div>
				<span>I wish this page</span>
				<input type="text" id="wishField" name="wishField" placeholder="enter your wish">
			</div>
		</div>
		<div id="miceType" class="center">
			<!-- &copy; 2017 The Kubernetes Authors | Documentation Distributed under <a href="https://github.com/kubernetes/kubernetes.github.io/blob/master/LICENSE" class="light-text">CC BY 4.0</a> -->
		</div>
		<div id="miceType" class="center">
			<!-- Copyright &copy; 2017 The Linux Foundation&reg;. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: <a href="https://www.linuxfoundation.org/trademark-usage" class="light-text">https://www.linuxfoundation.org/trademark-usage</a> -->
		</div>
	</main>
</footer>

<button class="flyout-button" onclick="kub.toggleToc()"></button>

<style>
.cse .gsc-control-cse, .gsc-control-cse, {
    padding: 0;
}
  .gsc-control-cse table, .gsc-control-cse-en table {
      margin:0px !important;
  }
  .gsc-above-wrapper-area {
      border-bottom: 0;
  }
</style>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-36037335-10', 'auto');
ga('send', 'pageview');

// hide docs nav area if no nav is present, or if nav only contains a link to the current page
(function () {
    window.addEventListener('DOMContentLoaded', init)

        // play nice with our neighbors
        function init() {
            window.removeEventListener('DOMContentLoaded', init)
                hideNav()
        }

    function hideNav(toc){
        if (!toc) toc = document.querySelector('#docsToc')
            var container = toc.querySelector('.container')

                // container is built dynamically, so it may not be present on the first runloop
                if (container) {
                    if (container.childElementCount === 0 || toc.querySelectorAll('a.item').length === 1) {
                        toc.style.display = 'none'
                            document.getElementById('docsContent').style.width = '100%'
                    }
                } else {
                    requestAnimationFrame(function () {
                        hideNav(toc)
                    })
                }
    }
})();
</script>

<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
    <!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->


</body>
</html>
